@model IEnumerable<BackEnd.Models.Evento>

@{
    ViewData["Title"] = "Eventos";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Evento.css" asp-append-version="true" />
}

<aside class="aside-evento">
    <div class="aside-content">
        <h1>Filtrar</h1>
        <div class="div-input">
            <input class="buscar-input" name="Buscar" type="search" placeholder="Buscar evento">
            <label for="Buscar">Buscar</label>
        </div>
    </div>
    <div class="border-aside"></div>
</aside>

<main class="main-evento">
    @if (Model == null || !Model.Any())
    {
        <p>No hay eventos disponibles.</p>
    }
    else
    {
        foreach (var evento in Model)
        {
            var fotoPath = "/Imagenes/" + (evento.ImagenUrl ?? "default.jpg");
            <div class="event-content">
                <div class="image-container">
                    <img class="image-event" src="@fotoPath" alt="@evento.Nombre" />
                </div>
                <div class="description-event">
                    <a class="titulo-evento" asp-controller="EventoCompleto" asp-action="EventoCompleto" asp-route-id="@evento.idEvento">
                        @evento.Nombre
                    </a>
                    <p class="descripcion">@evento.Descripcion</p>
                    <div class="div-eliminar">
                        <p class="fecha-evento">@evento.Fecha.ToShortDateString()</p>
                        @if (User.FindFirst(ClaimTypes.NameIdentifier)?.Value == evento.idEstudiante.ToString())
                        {
                            <form asp-controller="Evento" asp-action="EliminarEvento" method="post" onsubmit="return confirm('¿Estás seguro de que quieres eliminar este evento?');">
                            <input type="hidden" name="idEvento" value="@evento.idEvento" />
                            <button type="submit" class="boton boton-eliminar">Eliminar</button>
                            </form>
                        }
                    </div>
                </div>
            </div>
        }
    }
</main>

<script src="../js/Evento.js"></script>
